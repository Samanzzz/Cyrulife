const weeklyPlans = {

    "Saturday": {
        "meals": {
            "breakfast": [
                { "food": "Scrambled Eggs", "quantity": "4 eggs", "calories": 320 },
                { "food": "Avocado", "quantity": "1 medium", "calories": 240 }
            ],
            "lunch": [
                { "food": "Beef Steak", "quantity": "8 oz", "calories": 600 },
                { "food": "Roasted Sweet Potatoes", "quantity": "1 cup", "calories": 180 },
                { "food": "Steamed Broccoli", "quantity": "1 cup", "calories": 55 }
            ],
            "snack": [
                { "food": "Almonds", "quantity": "1 handful", "calories": 165 }
            ],
            "dinner": [
                { "food": "Salmon", "quantity": "8 oz", "calories": 460 },
                { "food": "Roasted Carrots", "quantity": "1 cup", "calories": 50 },
                { "food": "Green Beans", "quantity": "1 cup", "calories": 44 }
            ]
        },
        "workouts": [
            { "exercise": "Squats", "quantity": "5 sets x 12 reps (bodyweight)" },
            { "exercise": "Push-ups", "quantity": "4 sets x 15 reps" },
            { "exercise": "Brisk Walk", "quantity": "30 min" }
        ]
    },
    "Sunday": {
        "meals": {
            "breakfast": [
                { "food": "Scrambled Eggs", "quantity": "4 eggs", "calories": 320 },
                { "food": "Avocado", "quantity": "1 medium", "calories": 240 }
            ],
            "lunch": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Brown Rice", "quantity": "1 cup", "calories": 218 },
                { "food": "Steamed Broccoli", "quantity": "1 cup", "calories": 55 }
            ],
            "snack": [
                { "food": "Almonds", "quantity": "1 handful", "calories": 165 }
            ],
            "dinner": [
                { "food": "Salmon", "quantity": "8 oz", "calories": 460 },
                { "food": "Roasted Sweet Potatoes", "quantity": "1 cup", "calories": 180 },
                { "food": "Asparagus", "quantity": "1 cup", "calories": 40 }
            ]
        },
        "workouts": [
            { "exercise": "Squats", "quantity": "5 sets x 12 reps (bodyweight)" },
            { "exercise": "Push-ups", "quantity": "4 sets x 15 reps" },
            { "exercise": "Brisk Walk", "quantity": "30 min" }
        ]
    },
    "Monday": {
        "meals": {
            "breakfast": [
                { "food": "Eggs", "quantity": "3 eggs", "calories": 240 },
                { "food": "Avocado", "quantity": "1/2 medium", "calories": 120 }
            ],
            "lunch": [
                { "food": "Steak", "quantity": "8 oz", "calories": 600 },
                { "food": "Quinoa", "quantity": "1 cup", "calories": 222 }
            ],
            "snack": [
                { "food": "Walnuts", "quantity": "1 handful", "calories": 185 }
            ],
            "dinner": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Brussels Sprouts", "quantity": "1 cup", "calories": 56 },
                { "food": "Mashed Sweet Potatoes", "quantity": "1 cup", "calories": 180 }
            ]
        },
        "workouts": [
            { "exercise": "Brisk Walk", "quantity": "45 min" },
            { "exercise": "Jump Rope", "quantity": "5 sets x 1 min" }
        ]
    },
    "Tuesday": {
        "meals": {
            "breakfast": [
                { "food": "Scrambled Eggs", "quantity": "3 eggs", "calories": 240 },
                { "food": "Spinach", "quantity": "1 cup", "calories": 7 }
            ],
            "lunch": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Roasted Carrots", "quantity": "1 cup", "calories": 50 },
                { "food": "Brown Rice", "quantity": "1 cup", "calories": 218 }
            ],
            "snack": [
                { "food": "Greek Yogurt", "quantity": "1 cup", "calories": 100 }
            ],
            "dinner": [
                { "food": "Salmon", "quantity": "8 oz", "calories": 460 },
                { "food": "Roasted Sweet Potatoes", "quantity": "1 cup", "calories": 180 },
                { "food": "Green Beans", "quantity": "1 cup", "calories": 44 }
            ]
        },
        "workouts": [
            { "exercise": "Squats", "quantity": "5 sets x 12 reps (bodyweight)" },
            { "exercise": "Push-ups", "quantity": "4 sets x 12 reps" },
            { "exercise": "Walking Lunges", "quantity": "3 sets x 12 reps per leg" }
        ]
    },
    "Wednesday": {
        "meals": {
            "breakfast": [
                { "food": "Eggs", "quantity": "4 eggs", "calories": 320 },
                { "food": "Avocado", "quantity": "1 medium", "calories": 240 }
            ],
            "lunch": [
                { "food": "Beef Steak", "quantity": "8 oz", "calories": 600 },
                { "food": "Quinoa", "quantity": "1 cup", "calories": 222 },
                { "food": "Steamed Broccoli", "quantity": "1 cup", "calories": 55 }
            ],
            "snack": [
                { "food": "Almonds", "quantity": "1 handful", "calories": 165 }
            ],
            "dinner": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Roasted Brussels Sprouts", "quantity": "1 cup", "calories": 56 },
                { "food": "Mashed Sweet Potatoes", "quantity": "1 cup", "calories": 180 }
            ]
        },
        "workouts": [
            { "exercise": "Brisk Walk", "quantity": "45 min" },
            { "exercise": "Jump Rope", "quantity": "5 sets x 1 min" }
        ]
    },
    "Thursday": {
        "meals": {
            "breakfast": [
                { "food": "Scrambled Eggs", "quantity": "3 eggs", "calories": 240 },
                { "food": "Avocado", "quantity": "1/2 medium", "calories": 120 }
            ],
            "lunch": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Roasted Sweet Potatoes", "quantity": "1 cup", "calories": 180 },
                { "food": "Steamed Broccoli", "quantity": "1 cup", "calories": 55 }
            ],
            "snack": [
                { "food": "Walnuts", "quantity": "1 handful", "calories": 185 }
            ],
            "dinner": [
                { "food": "Beef Steak", "quantity": "8 oz", "calories": 600 },
                { "food": "Roasted Carrots", "quantity": "1 cup", "calories": 50 },
                { "food": "Green Beans", "quantity": "1 cup", "calories": 44 }
            ]
        },
        "workouts": [
            { "exercise": "Squats", "quantity": "5 sets x 12 reps (bodyweight)" },
            { "exercise": "Push-ups", "quantity": "4 sets x 12 reps" },
            { "exercise": "Brisk Walk", "quantity": "30 min" }
        ]
    },
    "Friday": {
        "meals": {
            "breakfast": [
                { "food": "Eggs", "quantity": "3 eggs", "calories": 240 },
                { "food": "Spinach", "quantity": "1 cup", "calories": 7 }
            ],
            "lunch": [
                { "food": "Salmon", "quantity": "8 oz", "calories": 460 },
                { "food": "Quinoa", "quantity": "1 cup", "calories": 222 },
                { "food": "Steamed Broccoli", "quantity": "1 cup", "calories": 55 }
            ],
            "snack": [
                { "food": "Greek Yogurt", "quantity": "1 cup", "calories": 100 }
            ],
            "dinner": [
                { "food": "Chicken Breast", "quantity": "8 oz", "calories": 376 },
                { "food": "Roasted Brussels Sprouts", "quantity": "1 cup", "calories": 56 },
                { "food": "Sweet Potatoes", "quantity": "1 cup", "calories": 180 }
            ]
        },
        "workouts": [
            { "exercise": "Brisk Walk", "quantity": "45 min" },
            { "exercise": "Jump Rope", "quantity": "5 sets x 1 min" }
        ]
    }
};

// Function to get the current date in Pacific Time (Los Angeles)
function getPacificDate() {
    const options = {
        timeZone: 'America/Los_Angeles',
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: false
    };
    const formatter = new Intl.DateTimeFormat('en-US', options);
    const formattedDate = formatter.format(new Date());
    return formattedDate.split(',')[0]; // Return only the date part (MM/DD/YYYY)
}

// Adjust loadPlan to handle Pacific Time and get the correct day of the week
function loadPlan() {
    const datePicker = document.getElementById("datePicker").value;
    const date = new Date(datePicker);
    
    // Get the Pacific Time (Los Angeles) day using the adjusted date
    const options = { weekday: 'long', timeZone: 'America/Los_Angeles' };
    const day = new Intl.DateTimeFormat('en-US', options).format(date);

    const plan = weeklyPlans[day];

    if (plan) {
        document.getElementById("dayTitle").textContent = `Plan for ${day}`;

        // Clear lists
        ["breakfast", "lunch", "snack", "dinner"].forEach(meal => {
            document.getElementById(meal).innerHTML = "";
        });

        let calorieTable = document.getElementById("calorieTable");
        calorieTable.innerHTML = `
            <tr>
                <th>Food Item</th>
                <th>Quantity</th>
                <th>Calories</th>
            </tr>
        `;
        let totalCalories = 0;

        for (let mealType in plan.meals) {
            plan.meals[mealType].forEach(meal => {
                document.getElementById(mealType).innerHTML += `<li>${meal.food} - ${meal.quantity}</li>`;
                calorieTable.innerHTML += `<tr><td>${meal.food}</td><td>${meal.quantity}</td><td>${meal.calories} kcal</td></tr>`;
                totalCalories += meal.calories;
            });
        }

        document.getElementById("totalCalories").textContent = totalCalories;

        // Populate Workouts
        let workoutList = document.getElementById("workouts");
        workoutList.innerHTML = "";
        plan.workouts.forEach(workout => {
            workoutList.innerHTML += `<li>${workout.exercise} - ${workout.quantity}</li>`;
        });

    } else {
        document.getElementById("dayTitle").textContent = "No Plan Found";
    }
}

// Set default date to today (Pacific Time)
document.addEventListener("DOMContentLoaded", () => {
    const pacificDate = getPacificDate();
    document.getElementById("datePicker").value = pacificDate;
    loadPlan(); // Load the plan for the Pacific date

    // Add event listener for when the date is changed
    document.getElementById("datePicker").addEventListener("change", loadPlan);

    // Add event listener for shopping list button
    document.getElementById("shoppingListButton").addEventListener("click", generateShoppingList);
});
